<CRANTaskView>
  <name>ComputationalEnvironments</name>
  <topic>Computational Environments and Reproducibility</topic>
  <maintainer email="daniel.nuest@uni-muenster.de">Daniel Nüst</maintainer>
  <version>2019-01-11</version>
  <info>
    <p>This Task View contains information about controlling and documenting computational environments in R. The base version of R does not provide features to manage different version of R or collections of packages easily, so a number of approaches and packages exist to simplify computational environments for the sake of development, testing, bug-fixing, and reproducibility. The <a href="https://cran.r-project.org/view=ReproducibleResearch">ReproducibleResearch Task View</a> provides further discussion of packages around scientific reproducibility.</p><p>If you have any comments or suggestions for additions or improvements for this Task View, go to GitHub and <a href="https://github.com/o2r-project/ctv-computational-environments/issues">submit an issue</a>, or make some changes and <a href="https://github.com/o2r-project/ctv-computational-environments/pulls">submit a pull request</a>. If you can’t contribute on GitHub, <a href="mailto:daniel.nuest@uni-muenster.de">send Daniel an email</a>. If you have an issue with one of the packages discussed below, please contact the maintainer of that package.</p><p><strong>Contributors:</strong> <span class="citation" data-cites="nuest">[@nuest]</span>(https://github.com/nuest/), <span class="citation" data-cites="jdblischak">[@jdblischak]</span>(https://github.com/jdblischak/)</p><h2 id="virtual-machines-and-containers">Virtual Machines and Containers</h2><p><strong>Virtual machines</strong> (VMs) are a straightforward way to encapsulate your runtime environment around the actual data and code.</p><blockquote><p><em>In computing, a virtual machine (VM) is an emulation of a computer system. Virtual machines are based on computer architectures and provide functionality of a physical computer.</em> <a href="https://en.wikipedia.org/wiki/Virtual_machine">https://en.wikipedia.org/wiki/Virtual_machine</a></p></blockquote><p>Their advantage for many users is the provided visual user interface. <a href="https://www.virtualbox.org/">VirtualBox</a> is a Free and Open Source (FOSS) virtualization product you can install on most operating systems (OS), then known as the “host” OS, and supports a number of <a href="https://www.virtualbox.org/wiki/Guest_OSes">“guest” operating systems</a>, many of which can install and run R just like on a non-virtual OS. VMs must be booted like regular OS and have a virtual disk, which you can archive or share with collaborators (though having to handle the large file size). VMs can share directories, network, and other devices with their host.</p><p><a href="https://en.wikipedia.org/wiki/Linux_containers"><strong>Containers</strong></a> are an effective way to apply virtual environments at the system level. Compared to <a href="#virtual-machines">virtual machines</a> their most important advantage for controlled computational environments are performance and transparency. Containers share the hosts core libraries and can “boot” within milliseconds and have negligible computational overhead. They can be created with the help of scripts or “recipes”, which are simple text files. These recipes can be included in code repositories and easily shared online.</p><p>The most widespread container solution is <strong><a href="https://docker.com">Docker</a></strong>. It is available for recent and common operating systems. <em>Dockerfiles</em> are the recipes that can be built to <em>Docker images</em>, which can be run and become <em>Docker containers</em>. Using Docker requires some proficiency with a <a href="https://en.wikipedia.org/wiki/Command-line_interface">command line interface</a> (CLI). The <a href="http://hub.docker.com/">Docker Hub</a> is an image repository with a large number of pre-built images for different use cases.</p><h3 id="rocker">Rocker</h3><p>The <a href="http://rocker-project.org/"><strong>Rocker</strong> project</a> provides a number of Docker <a href="https://www.rocker-project.org/images/">images for R</a>, including the <a href="https://docs.docker.com/docker-hub/official_repos/">official</a> <a href="https://hub.docker.com/_/r-base/"><code>r-base</code></a> image. All Rocker images are available on the Docker Hub. Rocker images are a stable and widespread tool for running R in local and cloud environments and have established useful best practices around containers with R.</p><p><strong>Bioconductor</strong> provides a <a href="http://bioconductor.org/help/docker/">collection of images</a> based on <code>rocker/rstudio</code>.</p><p><em>Since images can extend existing ones, using a suitable Rocker image as a base for your own computations is a very good approach to control your computational environment.</em> The simplest way is to run the <code>rocker/rstudio</code> container and work with the <a href="https://www.rstudio.com/products/rstudio/">RStudio IDE</a> in your web browser. Alternatively, you can develop your analysis on your computer and “package” it in a container only when preparing for a software release of scientific publication.</p><h3 id="other-r-distributions-and-operating-systems">Other R distributions and operating systems</h3><p>Docker images for other than the “regular” R distribution and the <a href="https://www.debian.org">Debian</a>-based Rocker images are available on Docker Hub, though none at the level of maturity and features of Rocker.</p><ul><li><strong><a href="https://mran.microsoft.com/open">MRO</a></strong> images are available as an independent contribution (i.e. not by MRO team) on Docker Hub, <a href="https://hub.docker.com/r/nuest/mro/"><code>nuest/mro</code></a>, and as CentOS-based Dockerfiles on GitHub, <a href="https://github.com/jlisic/R-docker-centos"><code>jlisic/R-docker-centos</code></a>.</li><li><a href="http://www.renjin.org/about.html">Renjin</a> images are available as an independent contribution on Docker Hub as <a href="https://hub.docker.com/r/nuest/renjin/"><code>nuest/renjin</code></a></li><li><a href="http://www.pqr-project.org/">pqR</a> images are available as an independent contribution on Docker Hub as <a href="https://hub.docker.com/r/nuest/pqr/"><code>nuest/pqr</code></a></li></ul><h3 id="tools-for-working-with-containers">Tools for working with containers</h3><p><strong>Docker</strong></p><ul><li><a href="https://github.com/wch/harbor/"><code>harbor</code></a> (not on CRAN) provides all Docker commands with R functions. It may be used to control Docker containers that run either locally or remotely.</li><li><pkg>docker</pkg> is an alternative to the plain R <code>harbor</code> and provides Docker CLI commands using the <a href="https://docker-py.readthedocs.io/en/stable/">Docker SDK for Python</a> via the package <a href="https://rstudio.github.io/reticulate/"><code>reticulate</code></a> and consequently runs on various operating systems including Windows. The package is best suited for apt Docker users, i.e. if you know the Docker commands and life cycle. Source code is <a href="https://github.com/bhaskarvk/docker">on GitHub</a>.</li><li><a href="https://github.com/cboettig/dockermachine"><code>dockermachine</code></a> (not on CRAN) provides a convenient R interface to the <a href="https://docs.docker.com/machine/overview/"><code>docker-machine</code></a> command, so you can provision easily local or remote/cloud instances of containers.</li><li><pkg>analogsea</pkg> is a general purpose client for the Digital Ocean v2 API. In addition, the package includes functions to install various R tools including base R, RStudio server, and more. There’s an improving interface to interact with docker on your remote droplets via this package. (<a href="https://github.com/sckott/analogsea">GitHub</a>)</li><li><a href="https://github.com/cole-brokamp/rize"><code>rize</code></a> (not on CRAN) dockerises <a href="https://shiny.rstudio.com/">Shiny</a> applications.</li><li><a href="https://github.com/o2r-project/containerit"><code>containerit</code></a> (not on CRAN) automatically creates Dockerfiles for arbitrary R sessions, script files, or workspace directories.</li><li><a href="https://github.com/traitecoevo/dockertest"><code>dockertest</code></a> (not con CRAN) is a proof of concept for using the isolated environments of Docker containers to run tests.</li><li><pkg>liftr</pkg> partially automates rendering R Markdown documents with Docker by adding YAML-metadata (<a href="https://github.com/road2stat/dockflow/blob/master/config/sequencing.yml">example</a>), see <a href="http://liftr.me/">http://liftr.me/</a>.</li><li><pkg>googleComputeEngineR</pkg> (<a href="https://cloudyr.github.io/googleComputeEngineR/">website</a>) provides an R interface to the Google Cloud Compute Engine API, for example for creating an RStudio VM, also using Docker to configure the environment.</li><li><a href="https://cran.r-project.org/package=batchtools"><strong><code>batchtools</code></strong></a> (<a href="https://github.com/mllg/batchtools">repository</a>, <a href="http://dx.doi.org/10.21105/joss.00135">JOSS paper</a>) provides a parallel implementation of <a href="https://en.wikipedia.org/wiki/Map_(parallel_pattern)">Map</a> for <a href="https://en.wikipedia.org/wiki/Supercomputer">HPC</a> for different <a href="https://en.wikipedia.org/wiki/Job_scheduler">schedulers</a>, including <a href="https://docs.docker.com/engine/swarm/">Docker Swarm</a>.</li></ul><h2 id="deployment">Deployment</h2><p>Another alternative to share a well-defined computational environment is setting up R on a server.</p><p><strong>Interactive development environments</strong></p><ul><li><a href="https://www.rstudio.com/products/rstudio/#Server">RStudio Server</a></li><li><a href="http://rcloud.social">RCloud</a> (<a href="https://hub.docker.com/r/rcl0ud/rcloud/">Docker images</a> and <a href="https://github.com/att/rcloud/tree/master/docker">Dockerfile</a>)</li></ul><p><strong>Apps and APIS</strong></p><ul><li><a href="https://www.shinyproxy.io/">ShinyProxy</a> by <a href="https://www.openanalytics.eu/">Open Analytics</a></li><li><pkg>plumber</pkg> (<a href="https://www.rplumber.io/">website</a> allows creating web services as HTTP APIs in pure R.</li><li><a href="http://rapache.net">rApache</a> supports web application development using the <a href="https://httpd.apache.org/">Apache web server</a>.</li></ul><h2 id="package-management">Package management</h2><ul><li><pkg>checkpoint</pkg> (<a href="https://github.com/RevolutionAnalytics/checkpoint">GitHub</a>)</li><li><pkg>rbundler</pkg></li><li><pkg>RSuite</pkg> (<a href="https://github.com/WLOGSolutions/RSuite">GitHub</a>)</li><li><pkg>packrat</pkg> (<a href="https://github.com/rstudio/packrat">GitHub</a>)</li><li>pkgsnap (<a href="https://github.com/MangoTheCat/pkgsnap">GitHub</a>)</li><li><pkg>switchr</pkg> (<a href="https://github.com/gmbecker/switchr">GitHub</a>)</li><li><pkg>switchrGist</pkg> (<a href="https://github.com/gmbecker/switchrGist">GitHub</a>)</li></ul><h2 id="structure-templates-and-workflows">Structure, templates and workflows</h2><p>A good project structure is essential to be sure about the actually used computational environment, which includes locally defines functions and data and not just used packages or the R version.</p><ul><li><pkg>here</pkg> constructs paths to a project’s files.</li><li><a href="https://github.com/benmarwick/researchcompendium">Ben Marwick’s compendium</a></li><li><a href="https://github.com/benmarwick/rrtools">rrtools</a></li></ul><h2 id="tracking-and-provenance">Tracking and provenance</h2><p>A computational environment evolves as an analysis is developed. These packages help observing these changes, in addition to always recommended <a href="https://en.wikipedia.org/wiki/Version%20control%20systems">code versioning systems</a>.</p><ul><li><a href="https://github.com/ekernf01/freezr"><code>freezer</code></a> (not on CRAN) helps data analysis by capturing analyses executions including used code, results, and metadata.</li><li><a href="https://github.com/NCEAS/recordr"><code>recordr</code></a> (not on CRAN) provides an automated way to capture data provenance of “runs” for R scripts and console commands.</li></ul>
  </info>
  <packagelist>
    <pkg priority="core">docker</pkg>
    <pkg>analogsea</pkg>
    <pkg>checkpoint</pkg>
    <pkg>googleComputeEngineR</pkg>
    <pkg>here</pkg>
    <pkg>liftr</pkg>
    <pkg>packrat</pkg>
    <pkg>plumber</pkg>
    <pkg>rbundler</pkg>
    <pkg>RSuite</pkg>
    <pkg>switchr</pkg>
    <pkg>switchrGist</pkg>
  </packagelist>
  <links>
    <a href="https://cran.r-project.org/view=ReproducibleResearch">ReproducibleResearch TaskView</a>
  </links>
</CRANTaskView>
